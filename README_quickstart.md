# A Tale of Two Domains: Exploring Efficient Architecture Design for Truly Autonomous Things
Artifact Evaluation Repository for ISCA 24

## Installation

**Repository Clone.** Firstly, clone our artifact from the repository.

`$ git clone https://github.com/tqxu23/chrysalis`

**Basic environment setup.** The following steps are required to install the software dependencies of the artifact. The linux operating system environment and python should be ready before the setup.

`$ cd chrysalis`

`$ pip install -r requirements.txt`

**Environment for accelerator search.** For experiment B in our paper, an external compilation for accelerator simulator is required. The simulation is based on MAESTRO while extend for intermittent scenarios.

`$ apt install libboost-all-dev scons g++`

`$ cd chrysalis/models/components/insitu/GammaCostCore/cost_model/maestro_source`

`$ scons`

After the compilation, copy the executable maestro file into the cost_model directory.

`$ cp ./maestro ../maestro`

## Experiment workflow

Multiple python scripts are ready for reproducing the data shown in the paper. Run the following scripts to achieve the search results.

The experiment examples are available in the `search` directory.

### Optimizing Existing AuTs with CHRYSALIS

Run `$ python engineA.py engineA.yaml` in terminal to start a search process.

A fast search for existing AuTs can be executed by using the script `search/engineA.py` and parameters in `search/engineA.yaml`. The parameters can be customized including the capacitance search range, solar panel size search range, light environment, simulation step size, and architecture search number. 

For result reproductions, Figure 6 in the paper can be directly generated by the given search example. With the given parameters given in the paper, the CHRYSALIS data in Figure 7 can be readily obtained by changing limitations on capacitor size (changing yaml file to make the capacitor size a stable number). Data in Figures 8 can be acquired through checkpoint energy, computing energy data and total energy data, while Figure 9 can be acquired through checkpoint energy and capacitor leakage energy data. The mentioned data in Figure 7 and Figure 8 are all intermediate variables and are presented by logging. (For the sake of code clarity, we have temporarily excluded the logging code related to this portion of data. We will continuously update chrysalis to enhance on data visualization and code structure.)

### AI Accelerator-based AuT design with CHRYSALIS

Run `$ python engineB.py engineB.yaml` in terminal to start a search process.

A fast search for AI acceelerator-based AuTs can be executed by using the script `search/engineB.py` and paramerters in `search/engineB.yaml`. The parameters can be customized including the capacitance search range, solar panel size search range, accelerator PE number search range, accelerator memory search range, light environment, simulation step size, and architecture search number.

For result reproductions, Figure 10 and can be readily obtained by changing architecture and limitations on capacitor, solar panel, PE number and cache size. Dat in Figure 11 can be acquired through computing energy data and total energy data, which are intermediate variables and are presented by logging. (For the sake of code clarity, we have temporarily excluded the logging code related to this portion of data. We will continuously update chrysalis to enhance on data visualization and code structure.)

